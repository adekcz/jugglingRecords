{% extends "records/base.html" %}
{% block content %}
<div class="color-section">
    <h1>World Records</h1>

    <div class="form-wrapper w-form">
        <form class="radio-button-form" action="/records/" method="post">
            {% csrf_token %}
            {% load widget_tweaks %} 
            {% for subform in form %}
                <div class="filter-line stick">
                <div class="filter-text">{{subform.label}}:</div>
                {% for radio in subform %}
                <div class="radio-button w-clearfix w-radio">
                        {%render_field radio.tag %} {% comment %} classes are set in forms.py {% endcomment %}
                        <label class="record-filter-form-label w-form-label" for="radio">{{radio.choice_label}}</label>
                    </div>
                {% endfor %}
                </div>
            {% endfor %}
        </form>
    </div>



    <script type='text/javascript'>
        var selectedProp = $("input[value='{{selected_prop}}']");
        var selectedType = $("input[value='{{selected_record_type}}']");
        selectedProp.closest("div").addClass("active");
        selectedType.closest("div").addClass("active");
        $('.record-filter-form-label').click(function(){
            $(this).prev().attr('checked', true);
            $(this).closest("form").submit();



        });



    </script>

    <div class="filter-line stick">
      <div class="filter-text">Endurance type:</div>
      <div class="form-wrapper w-form">
        <form class="radio-button-form" data-name="Email Form" id="email-form" name="email-form">
          <div class="left radio-button w-clearfix w-radio">
            <input class="rb w-radio-input" data-name="Radio 2" id="radio" name="radio-2" type="radio" value="Radio">
            <label class="w-form-label" for="radio">all</label>
          </div>
          <div class="active radio-button w-clearfix w-radio">
            <input class="rb w-radio-input" data-name="Radio 2" id="radio" name="radio-2" type="radio" value="Radio">
            <label class="w-form-label" for="radio">plain</label>
          </div>
          <div class="radio-button w-clearfix w-radio">
            <input class="rb w-radio-input" data-name="Radio 2" id="radio" name="radio-2" type="radio" value="Radio">
            <label class="w-form-label" for="radio">trick</label>
          </div>
          <div class="radio-button right w-clearfix w-radio">
            <input class="rb w-radio-input" data-name="Radio 2" id="radio" name="radio-2" type="radio" value="Radio">
            <label class="w-form-label" for="radio">constrained</label>
          </div>
        </form>
        <div class="w-form-done">
          <div>Thank you! Your submission has been received!</div>
        </div>
        <div class="w-form-fail">
          <div>Oops! Something went wrong while submitting the form</div>
        </div>
      </div>
    </div>






    <div class="database-line title">
        <div class="entry">
            <div class="relative-pt w-clearfix">
                <div class="entry-cell home-record">
                    <div>record</div>
                </div>
                <div class="entry-cell home-value">
                    <div>value</div>
                </div>
                <div class="entry-cell home-by">
                    <div>by</div>
                </div>
                <div class="entry-cell home-on">
                    <div>on</div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="database-section">
    {% for record in records %}
    <div class="database-line yellow">
        <div class="entry">
            <div class="relative-pt w-clearfix">
                <div class="entry-cell home-record">
                    <a href="/records/recordCategoryPage/{{record.category.prop}}-{{record.category.prop_count}}-{{record.category.pattern}}">
                        {{ record.category }}
                    </a>
                </div>
                <div class="entry-cell home-value">
                    <a href="{{record.url_to_proof}}">
                        {{ record.endurance_time }} </a>
                </div>
                <div class="entry-cell home-by">
                    <a href="/records/profilePage/{{record.user.username}}">
                        {{ record.user.first_name }}
                        {{ record.user.last_name }} </a>
                </div>
                <div class="entry-cell home-on">
                    {{ record.record_happened|date:"d/m/Y" }} 
                    {{ record.record_happened }} 
                </div>
            </div>
        </div>
        <div class="entry-mob">
            <div>
                <a href="/records/recordCategoryPage/{{record.category.prop}}-{{record.category.prop_count}}-{{record.category.pattern}}">
                    {{ record.category }} </a>
            </div>
            <div class="value-mob">
                <a href="/records/recordCategoryPage/{{record.category.prop}}-{{record.category.prop_count}}-{{record.category.pattern}}">
                    {{ record.category }} </a>
            </div>
            <div>
                by 
                <a href="/records/profilePage/{{record.user.username}}">
                    {{ record.user.first_name }}
                    {{ record.user.last_name }} </a>
                on
                {{ record.record_happened|date:"d/m/Y"  }} 
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock content %}
